<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | MergePoint</title>
    <link rel="stylesheet" href="signup-style.css">
    <link rel="icon" type="image/png" href="assets/favicon.png?v=1.1">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <header class="page-header">
        <img src="assets/signup-logo.png" alt="MergePoint Logo" class="nav-logo">
    </header>

    <main class="auth-container">
        <div class="branding-section">
            <h1>Welcome back to <span class="highlight">MergePoint.</span></h1>
            <p>Access your AI-powered workspace to manage active bids, analyze RFPs, and scale your operations with precision.</p>
        </div>

        <div class="auth-card">
            <div class="auth-header">
                <h2>Sign In</h2>
                <p class="subtitle">Enter your workspace credentials.</p>
            </div>

            <form id="login-form" class="auth-form">
                <div class="input-group">
                    <label for="email">Work Email</label>
                    <div class="input-wrapper">
                        <i data-lucide="mail"></i>
                        <input type="email" id="email" required placeholder="name@company.com">
                    </div>
                </div>

                <div class="input-group">
                    <label for="password">Password</label>
                    <div class="input-wrapper">
                        <i data-lucide="lock"></i>
                        <input type="password" id="password" required placeholder="••••••••">
                    </div>
                </div>

                <button type="submit" class="btn-primary">
                    Sign In <i data-lucide="log-in"></i>
                </button>
            </form>

            <div class="auth-divider" style="text-align: center; margin: 20px 0; color: #94a3b8; font-size: 0.8rem; position: relative;">
                <span style="background: #fff; padding: 0 10px; position: relative; z-index: 1;">OR</span>
                <div style="position: absolute; top: 50%; left: 0; right: 0; border-top: 1px solid #e2e8f0;"></div>
            </div>

            <div class="sso-buttons" style="display: flex; flex-direction: column; gap: 10px;">
                <button id="google-login" class="btn-sso" style="display: flex; align-items: center; justify-content: center; gap: 10px; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; background: white; cursor: pointer; font-weight: 500;">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/google/google-original.svg" alt="Google" style="width: 18px;">
                    Continue with Google
                </button>
                <button id="microsoft-login" class="btn-sso" style="display: flex; align-items: center; justify-content: center; gap: 10px; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; background: white; cursor: pointer; font-weight: 500;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" alt="Microsoft" style="width: 18px;">
                    Continue with Microsoft
                </button>
            </div>

            <div class="auth-footer">
                <p>New to MergePoint? <a href="mailto:support@mergepoint-software.com">Contact Admin for access</a></p>
                <div class="trust-links" style="margin-top: 25px; padding-top: 15px; border-top: 1px solid #e2e8f0; font-size: 0.75rem; color: #94a3b8;">
                    <p>© 2026 Merge Point Software Ltd</p>
                    <div style="margin-top: 8px;">
                        <a href="privacy.html" style="color: #64748b; text-decoration: underline;">Privacy Policy</a> • 
                        <a href="terms.html" style="color: #64748b; text-decoration: underline;">Terms of Service</a> •
                        <a href="mailto:support@mergepoint-software.com" style="color: #64748b; text-decoration: underline;">Support</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script type="module">
        import { loginUser, loginWithGoogle, loginWithMicrosoft } from './auth.js';

        const loginForm = document.getElementById('login-form');
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            try {
                await loginUser(email, password);
            } catch (error) {
                console.error(error);
                alert("Invalid credentials. Please try again.");
            }
        });

        document.getElementById('google-login').addEventListener('click', async () => {
            try { await loginWithGoogle(); } catch (error) { alert("Google Login Error"); }
        });

        document.getElementById('microsoft-login').addEventListener('click', async () => {
            try { await loginWithMicrosoft(); } catch (error) { alert("Microsoft Login Error"); }
        });
    </script>
    <script>lucide.createIcons();</script>
</body>
</html>